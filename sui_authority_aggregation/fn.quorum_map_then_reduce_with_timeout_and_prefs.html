<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This function takes an initial state, than executes an asynchronous function (FMap) for each authority, and folds the results as they become available into the state using an async function (FReduce)."><title>quorum_map_then_reduce_with_timeout_and_prefs in sui_authority_aggregation - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="sui_authority_aggregation" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.1 (4eb161250 2025-03-15)" data-channel="1.85.1" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../sui_authority_aggregation/index.html">sui_<wbr>authority_<wbr>aggregation</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">sui_authority_aggregation</a></span><h1>Function <span class="fn">quorum_map_then_reduce_with_timeout_and_prefs</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/sui_authority_aggregation/lib.rs.html#37-164">Source</a> </span></div><pre class="rust item-decl"><code>pub async fn quorum_map_then_reduce_with_timeout_and_prefs&lt;'a, C, K, Client: 'a, S, V, R, E, FMap, FReduce&gt;(
    committee: <a class="struct" href="https://doc.rust-lang.org/1.85.1/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;C&gt;,
    authority_clients: <a class="struct" href="https://doc.rust-lang.org/1.85.1/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.85.1/alloc/collections/btree/map/struct.BTreeMap.html" title="struct alloc::collections::btree::map::BTreeMap">BTreeMap</a>&lt;K, <a class="struct" href="https://doc.rust-lang.org/1.85.1/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;Client&gt;&gt;&gt;,
    authority_preferences: <a class="enum" href="https://doc.rust-lang.org/1.85.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.SigRequestPrefs.html" title="struct sui_authority_aggregation::SigRequestPrefs">SigRequestPrefs</a>&lt;K&gt;&gt;,
    initial_state: S,
    map_each_authority: FMap,
    reduce_result: FReduce,
    total_timeout: <a class="struct" href="https://doc.rust-lang.org/1.85.1/core/time/struct.Duration.html" title="struct core::time::Duration">Duration</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.85.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(R, FuturesUnordered&lt;impl <a class="trait" href="https://doc.rust-lang.org/1.85.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = (K, <a class="enum" href="https://doc.rust-lang.org/1.85.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;V, E&gt;)&gt; + 'a&gt;), S&gt;<div class="where">where
    K: <a class="trait" href="https://doc.rust-lang.org/1.85.1/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a> + ConciseableName&lt;'a&gt; + <a class="trait" href="https://doc.rust-lang.org/1.85.1/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'a,
    C: CommitteeTrait&lt;K&gt;,
    FMap: <a class="trait" href="https://doc.rust-lang.org/1.85.1/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(K, <a class="struct" href="https://doc.rust-lang.org/1.85.1/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;Client&gt;) -&gt; <a class="type" href="type.AsyncResult.html" title="type sui_authority_aggregation::AsyncResult">AsyncResult</a>&lt;'a, V, E&gt; + <a class="trait" href="https://doc.rust-lang.org/1.85.1/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'a,
    FReduce: <a class="trait" href="https://doc.rust-lang.org/1.85.1/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(S, K, StakeUnit, <a class="enum" href="https://doc.rust-lang.org/1.85.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;V, E&gt;) -&gt; BoxFuture&lt;'a, <a class="enum" href="enum.ReduceOutput.html" title="enum sui_authority_aggregation::ReduceOutput">ReduceOutput</a>&lt;R, S&gt;&gt;,</div></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This function takes an initial state, than executes an asynchronous function (FMap) for each
authority, and folds the results as they become available into the state using an async function (FReduce).</p>
<p>prefetch_timeout: the minimum amount of time to spend trying to gather results from all authorities
before falling back to arrival order.</p>
<p>total_timeout: the maximum amount of total time to wait for results from all authorities, including
time spent prefetching.</p>
</div></details></section></div></main></body></html>